# 良いコード悪いコードで学ぶ設計入門

## 読書の背景

質の高いコードを書く必要が出てきたので、まず絶対的な「質の高いコード」の概念を理解する。
    - 質の高いコードは絶対的なものであり、正解を知る必要がある。

## 内容

### 12/01

#### 今日の内容

- いいコードを書くには悪式コードを近くする必要がある。
  - その例としてあげられるのが
    - めちゃくちゃな変数
    - ネストが深すぎる
    - データクラスを使用すること
  - では、なぜ、「データクラス」がよくないのか。
    - 仕様変更時にトラブルが起きてしまう。
    - 主要なトラブルとしてあげられるのは、
      - 重複コード(二重化)
      - 修正漏れ
      - 可読性下がる
      - 生焼けオブジェクト
      - 不整地の混入
    - オブジェクト指向の大原則としてあげられるのが「データと処理を近づけて、メソッドでデータを提供して内部は隠ぺいする。
    - データを処理、変更するメソッドをクラスに含ませない場合は,
    その処理があるのに気づかず次の開発者が二重にメソッドを書いてしまったりするので、良くない。
    これらをカプセル化して「高凝縮」なクラス設計をするべし!

- 設計の原則
  - 変数名
    - 意図が分かる命名をする
    - 使いまわしをしない。
      - 再代入するときに、変数の意味が異なるなら新しい変数を用意する
    - メソッド化
      - 長いなら意味のあるまとまりでメソッド化したらきれい
    - カプセル化
      - データと処理を同一のモジュールに記載する(クラス化)
  
- クラス設計
  - クラス単体で正常に動作するように設計する
    - 「自己防衛責務」
      - 不整値が入ったり、オブジェクト化してなくてヌルポが出たり不正な値が入ったりするのを防ぎたい。そういう自己管理はそのモジュールで完結させる。

- 質の高いクラス設計
  - 完全コンストラクタ
  - 計算ロジックをデータを保持する側に寄せる
  - 不変で思わぬ変更を防ぐ
  - 変更したい場合は新しいインスタンスを生成する
  - メソッド引数やローカル変数にもfinalを
  - 値オブジェクト
　- 現実と乖離したメソッドは定義しない

#### 学んだこと

- 生焼けオブジェクトを作らない
- 完全なオブジェクト以外を生成できないようにコンストラクタ内でバリデーションをつける
- 途中で変更されないように、現実的に変動するもの以外は引数とフィールドにfinalをつける。
- コンストラクタでデフォルトコンストラクタを使わない
- 値オブジェクトは使えそうなので今後使ってみたい。

設計ありき。考えながらコードを書かない。

### どう生かすか

- 可読性の高いコードを書く
